"0","## Combine airports"
"0","airline <- airline %>% "
"0","  ## Merge fringe airports into major ones"
"0","  dplyr::mutate(ç©ºæ¸¯i = case_when(ç©ºæ¸¯i == ""æˆç”°"" ~ ""ç¾½ç”°"","
"0","                                ç©ºæ¸¯i == ""ä¼Šä¸¹"" ~ ""é–¢è¥¿å›½éš›"", "
"0","                                ç©ºæ¸¯i == ""å—ç´€ç™½æµœ"" ~ ""é–¢è¥¿å›½éš›"","
"0","                                ç©ºæ¸¯i == ""ç¥æˆ¸"" ~ ""é–¢è¥¿å›½éš›"","
"0","                                ç©ºæ¸¯i == ""åŒ—ä¹å·"" ~ ""ç¦å²¡"", "
"0","                                ç©ºæ¸¯i == ""ä½è³€"" ~ ""ç¦å²¡"","
"0","                                ç©ºæ¸¯i == ""ä¸­éƒ¨"" ~ ""åå¤å±‹"","
"0","                                ç©ºæ¸¯i == ""å°ç‰§"" ~ ""åå¤å±‹"","
"0","                                TRUE ~ ç©ºæ¸¯i),"
"0","                ç©ºæ¸¯j = case_when(ç©ºæ¸¯j == ""æˆç”°"" ~ ""ç¾½ç”°"","
"0","                                ç©ºæ¸¯j == ""ä¼Šä¸¹"" ~ ""é–¢è¥¿å›½éš›"", "
"0","                                ç©ºæ¸¯j == ""å—ç´€ç™½æµœ"" ~ ""é–¢è¥¿å›½éš›"","
"0","                                ç©ºæ¸¯j == ""ç¥æˆ¸"" ~ ""é–¢è¥¿å›½éš›"","
"0","                                ç©ºæ¸¯j == ""åŒ—ä¹å·"" ~ ""ç¦å²¡"", "
"0","                                ç©ºæ¸¯j == ""ä½è³€"" ~ ""ç¦å²¡"","
"0","                                ç©ºæ¸¯j == ""ä¸­éƒ¨"" ~ ""åå¤å±‹"","
"0","                                ç©ºæ¸¯j == ""å°ç‰§"" ~ ""åå¤å±‹"","
"0","                                TRUE ~ ç©ºæ¸¯j)) %>% "
"0","  # Fares are translated to one-way"
"0","  dplyr::mutate(è²»ç”¨ = è²»ç”¨ / 2) %>% "
"0","  # Combine ODs"
"0","  dplyr::group_by(ç©ºæ¸¯i, ç©ºæ¸¯j) %>% "
"0","  dplyr::mutate(i = min(i),"
"0","                j = min(j),"
"0","                è²»ç”¨ = sum(èˆªç©ºä¾¿æ•° * è²»ç”¨) / sum(èˆªç©ºä¾¿æ•°), ## Weighted Mean"
"0","                æ‰€è¦æ™‚é–“ = sum(èˆªç©ºä¾¿æ•° * æ‰€è¦æ™‚é–“) / sum(èˆªç©ºä¾¿æ•°), ## Weighted Mean"
"0","                èˆªç©ºä¾¿æ•° = 365 * sum(èˆªç©ºä¾¿æ•°), "
"0","                æ»åœ¨å¯èƒ½æ™‚é–“ = max(æ»åœ¨å¯èƒ½æ™‚é–“), "
"0","                ã‚¨ã‚¢ãƒ©ã‚¤ãƒ³å‚å…¥æ•° = mean(ã‚¨ã‚¢ãƒ©ã‚¤ãƒ³å‚å…¥ç¤¾æ•°)) %>% "
"0","  dplyr::select(ç©ºæ¸¯i, ç©ºæ¸¯j, i, j, æ‰€è¦æ™‚é–“, è²»ç”¨, "
"0","                èˆªç©ºä¾¿æ•°, æ»åœ¨å¯èƒ½æ™‚é–“, ã‚¨ã‚¢ãƒ©ã‚¤ãƒ³å‚å…¥æ•°) %>% "
"0","  dplyr::distinct()"
"0",""
"0","# Merge airline data into the whole airline dataframe"
"0","dataframe.airline <- dataframe.airline %>% "
"0","  dplyr::left_join(airline, by = c(""X47ã‚¾ãƒ¼ãƒ³i"" = ""i"","
"0","                                   ""X47ã‚¾ãƒ¼ãƒ³j"" = ""j"")) %>% "
"0","  # Add Accessibility"
"0","  dplyr::left_join(accessibility.airport, by = c(""X207ã‚¾ãƒ¼ãƒ³åj"" = ""ã‚¾ãƒ¼ãƒ³"")) %>% "
"0","  dplyr::left_join(accessibility.airport, by = c(""X207ã‚¾ãƒ¼ãƒ³åi"" = ""ã‚¾ãƒ¼ãƒ³"")) %>% "
"0","  dplyr::mutate(ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ = ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£.x + ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£.y) %>% "
"0","  dplyr::select(""X47ã‚¾ãƒ¼ãƒ³i"", ""X47ã‚¾ãƒ¼ãƒ³j"", ""i"", ""j"", everything()) %>% "
"0","  # Add OD"
"0","  dplyr::left_join(OD.207, by = c(""X207ã‚¾ãƒ¼ãƒ³i"", ""X207ã‚¾ãƒ¼ãƒ³j"")) %>% "
"0","  # Add Railway Dummy"
"0","  dplyr::mutate(é‰„é“ãƒ€ãƒŸãƒ¼ = 0) %>% "
"0","  # Select"
"0","  dplyr::select(""i"", ""j"", ""X207ã‚¾ãƒ¼ãƒ³i"", ""X207ã‚¾ãƒ¼ãƒ³j"", ""X47ã‚¾ãƒ¼ãƒ³i"", ""X47ã‚¾ãƒ¼ãƒ³j"", "
"0","                ""X207ã‚¾ãƒ¼ãƒ³åi"", ""X207ã‚¾ãƒ¼ãƒ³åj"", ""æ‰€è¦æ™‚é–“"", ""è²»ç”¨"", ""èˆªç©ºä¾¿æ•°"", "
"0","                ""æ»åœ¨å¯èƒ½æ™‚é–“"", ""ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£"", ""é‰„é“ãƒ€ãƒŸãƒ¼"", ""ã‚¨ã‚¢ãƒ©ã‚¤ãƒ³å‚å…¥æ•°"", "
"0","                ""airline"", ""all2"", ""all"") %>% "
"0","  dplyr::rename(x = airline, OD1 = all2, OD2 = all)"
"0",""
"0","# summary(dataframe.airline)"
"0",""
"0",""
"0","## Railway Data"
"0","dataframe.railway <- dataframe.railway %>% "
"0","  dplyr::left_join(railway, by = c(""æœ€å¯„ã‚Ši"" = ""i"", ""æœ€å¯„ã‚Šj"" = ""j"")) %>% "
"0","  dplyr::left_join(railwaycost, by = c(""æœ€å¯„ã‚Ši"" = ""é§…i"", ""æœ€å¯„ã‚Šj"" = ""é§…j"")) %>% "
"0","  dplyr::left_join(accessibility.station, by = c(""X207ã‚¾ãƒ¼ãƒ³åj"" = ""ã‚¾ãƒ¼ãƒ³"")) %>% "
"0","  dplyr::left_join(accessibility.station, by = c(""X207ã‚¾ãƒ¼ãƒ³åi"" = ""ã‚¾ãƒ¼ãƒ³"")) %>% "
"0","  dplyr::mutate(ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ = ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£.x + ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£.y) %>% "
"0","  dplyr::left_join(OD.207, by = c(""X207ã‚¾ãƒ¼ãƒ³i"", ""X207ã‚¾ãƒ¼ãƒ³j"")) %>% "
"0","  # Add Railway Dummy and Other Airline-Related Variables"
"0","  dplyr::mutate(é‰„é“ãƒ€ãƒŸãƒ¼ = 1, "
"0","                èˆªç©ºä¾¿æ•° = 1, "
"0","                ã‚¨ã‚¢ãƒ©ã‚¤ãƒ³å‚å…¥æ•° = 0) %>% "
"0","  # Select"
"0","  dplyr::select(""i.x"", ""j.x"", ""X207ã‚¾ãƒ¼ãƒ³i"", ""X207ã‚¾ãƒ¼ãƒ³j"", ""X47ã‚¾ãƒ¼ãƒ³i"", ""X47ã‚¾ãƒ¼ãƒ³j"", "
"0","                ""X207ã‚¾ãƒ¼ãƒ³åi"", ""X207ã‚¾ãƒ¼ãƒ³åj"", ""æ‰€è¦æ™‚é–“.1"", ""cost"", ""èˆªç©ºä¾¿æ•°"", "
"0","                ""æ»åœ¨å¯èƒ½æ™‚é–“.1"", ""ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£"", ""é‰„é“ãƒ€ãƒŸãƒ¼"", ""ã‚¨ã‚¢ãƒ©ã‚¤ãƒ³å‚å…¥æ•°"", "
"0","                ""railway"", ""all2"", ""all"", ""distance"") %>% "
"0","  dplyr::rename(i = i.x, j = j.x, æ‰€è¦æ™‚é–“ = æ‰€è¦æ™‚é–“.1, è²»ç”¨ = cost, "
"0","                æ»åœ¨å¯èƒ½æ™‚é–“ = æ»åœ¨å¯èƒ½æ™‚é–“.1, "
"0","                x = railway, OD1 = all2, OD2 = all,"
"0","                è·¯ç·šè·é›¢ = distance) %>% "
"0","  # Transform Data Type"
"0","  dplyr::mutate_at(vars(æ‰€è¦æ™‚é–“, æ»åœ¨å¯èƒ½æ™‚é–“, è²»ç”¨),"
"0","                   ~ as.numeric(.))"
"2","Warning: [38;5;255mThere were 2 warnings in `mutate()`.
The first warning was:[39m
[38;5;255m[36mâ„¹[38;5;255m In argument: `æ»åœ¨å¯èƒ½æ™‚é–“ = (structure(function (..., .x = ..1, .y = ..2, . = ..1) ...`.[39m
Caused by warning in `as.numeric()`:
[33m![39m NAs introduced by coercion
[38;5;255m[36mâ„¹[38;5;255m Run ]8;;ide:run:dplyr::last_dplyr_warnings()dplyr::last_dplyr_warnings()]8;; to see the 1 remaining warning.[39m"
"0","# summary(dataframe.railway)"
